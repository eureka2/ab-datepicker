/*!
 * Accessible Datepicker v2.1.5 
 * Copyright 2015 Eureka2, Jacques Archim√®de.
 * Based on the example of the Open AJAX Alliance Accessibility Tools Task Force : http://www.oaa-accessibility.org/examplep/datepicker1/
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * Inspired by :
 * http://wet-boew.github.io/wet-boew/demos/datepicker/datepicker-fr.html
 * http://eternicode.github.io/bootstrap-datepicker
 */
!function(){"use strict";void 0===Date.dp_locales&&(Date.dp_locales={texts:{buttonTitle:"Select date ...",buttonLabel:"Click or press the Enter key or the spacebar to open the calendar",prevButtonLabel:"Go to previous month",prevMonthButtonLabel:"Go to the previous year",prevYearButtonLabel:"Go to the previous twenty years",nextButtonLabel:"Go to next month",nextMonthButtonLabel:"Go to the next year",nextYearButtonLabel:"Go to the next twenty years",changeMonthButtonLabel:"Click or press the Enter key or the spacebar to change the month",changeYearButtonLabel:"Click or press the Enter key or the spacebar to change the year",changeRangeButtonLabel:"Click or press the Enter key or the spacebar to go to the next twenty years",closeButtonTitle:"Close",closeButtonLabel:"Close the calendar",calendarHelp:"- Up Arrow and Down Arrow - goes to the same day of the week in the previous or next week respectively. If the end of the month is reached, continues into the next or previous month as appropriate.\r\n- Left Arrow and Right Arrow - advances one day to the next, also in a continuum. Visually focus is moved from day to day and wraps from row to row in the grid of days.\r\n- Control+Page Up - Moves to the same date in the previous year.\r\n- Control+Page Down - Moves to the same date in the next year.\r\n- Home - Moves to the first day of the current month.\r\n- End - Moves to the last day of the current month.\r\n- Page Up - Moves to the same date in the previous month.\r\n- Page Down - Moves to the same date in the next month.\r\n- Enter or Espace - closes the calendar, and the selected date is shown in the associated text box.\r\n- Escape - closes the calendar without any action."},directionality:"LTR",month_names:["January","February","March","April","May","June","July","August","September","October","November","December"],month_names_abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],month_names_narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],day_names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_names_abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],day_names_short:["Su","Mo","Tu","We","Th","Fr","Sa"],day_names_narrow:["S","M","T","W","T","F","S"],day_periods:{am:"AM",noon:"noon",pm:"PM"},day_periods_abbreviated:{am:"AM",noon:"noon",pm:"PM"},day_periods_narrow:{am:"a",noon:"n",pm:"p"},quarter_names:["1st quarter","2nd quarter","3rd quarter","4th quarter"],quarter_names_abbreviated:["Q1","Q2","Q3","Q4"],quarter_names_narrow:["1","2","3","4"],era_names:["Before Christ","Anno Domini"],era_names_abbreviated:["BC","AD"],era_names_narrow:["B","A"],full_format:"EEEE, MMMM d, y",long_format:"MMMM d, y",medium_format:"MMM d, y",short_format:"M/d/yy",firstday_of_week:0})}(),function(t){if("function"==typeof define&&define.amd)define(["jquery"],t);else if("object"==typeof exports)t(require("jquery"));else{if("undefined"==typeof jQuery)throw new Error("Datepicker's JavaScript requires jQuery");t(jQuery)}}(function(t,e){"use strict";var a=['<a class="datepicker-button input-group-addon" role="button" aria-haspopup="true" tabindex="0" aria-labelledby="datepicker-bn-open-label-CALENDARID">','\t<span class="glyphicon glyphicon-calendar" title="Select Date..."></span>',"</a>"],i=['<div class="datepicker-calendar" id="datepicker-calendar-CALENDARID" aria-hidden="false">','\t<div class="datepicker-month-wrap">','\t\t<div class="datepicker-month-fast-next pull-right" role="button" aria-labelledby="datepicker-bn-fast-next-label-CALENDARID" tabindex="0"><span class="glyphicon glyphicon-forward"></span></div>','\t\t<div class="datepicker-month-next pull-right" role="button" aria-labelledby="datepicker-bn-next-label-CALENDARID" tabindex="0"><span class="glyphicon glyphicon-triangle-right"></span></div>','\t\t<div class="datepicker-month-fast-prev pull-left" role="button" aria-labelledby="datepicker-bn-fast-prev-label-CALENDARID" tabindex="0"><span class="glyphicon glyphicon-backward"></span></div>','\t\t<div class="datepicker-month-prev pull-left" role="button" aria-labelledby="datepicker-bn-prev-label-CALENDARID" tabindex="0"><span class="glyphicon glyphicon-triangle-left"></span></div>','\t\t<div id="datepicker-month-CALENDARID" class="datepicker-month" tabindex="0" role="heading" aria-live="assertive" aria-atomic="true" title="Click or press the Enter key or the spacebar to change the month">July 2015</div>',"\t</div>",'\t<table class="datepicker-grid" role="grid" aria-readonly="true" aria-activedescendant="datepicker-err-msg-CALENDARID" aria-labelledby="datepicker-month-CALENDARID" tabindex="0">','\t\t<thead role="presentation">','\t\t\t<tr class="datepicker-weekdays" role="row">','\t\t\t\t<th scope="col" id="day0-header-CALENDARID" class="datepicker-day" role="columnheader" aria-label="Sunday"><abbr title="Sunday">Su</abbr></th>','\t\t\t\t<th scope="col" id="day1-header-CALENDARID" class="datepicker-day" role="columnheader" aria-label="Monday"><abbr title="Monday">Mo</abbr></th>','\t\t\t\t<th scope="col" id="day2-header-CALENDARID" class="datepicker-day" role="columnheader" aria-label="Tuesday"><abbr title="Tuesday">Tu</abbr></th>','\t\t\t\t<th scope="col" id="day3-header-CALENDARID" class="datepicker-day" role="columnheader" aria-label="Wednesday"><abbr title="Wednesday">We</abbr></th>','\t\t\t\t<th scope="col" id="day4-header-CALENDARID" class="datepicker-day" role="columnheader" aria-label="Thursday"><abbr title="Thursday">Th</abbr></th>','\t\t\t\t<th scope="col" id="day5-header-CALENDARID" class="datepicker-day" role="columnheader" aria-label="Friday"><abbr title="Friday">Fr</abbr></th>','\t\t\t\t<th scope="col" id="day6-header-CALENDARID" class="datepicker-day" role="columnheader" aria-label="Saturday"><abbr title="Saturday">Sa</abbr></th>',"\t\t\t</tr>","\t\t</thead>",'\t\t<tbody role="presentation">',"\t\t\t<tr>",'\t\t\t\t<td id="datepicker-err-msg-CALENDARID" colspan="7">Javascript must be enabled</td>',"\t\t\t</tr>","\t\t</tbody>","\t</table>",'\t<div class="datepicker-close-wrap">','\t\t<button class="datepicker-close" id="datepicker-close-CALENDARID" aria-labelledby="datepicker-bn-close-label-CALENDARID">Close</button>',"\t</div>",'\t<div id="datepicker-bn-open-label-CALENDARID" class="datepicker-bn-open-label offscreen">Click or press the Enter key or the spacebar to open the calendar</div>','\t<div id="datepicker-bn-prev-label-CALENDARID" class="datepicker-bn-prev-label offscreen">Go to previous month</div>','\t<div id="datepicker-bn-next-label-CALENDARID" class="datepicker-bn-next-label offscreen">Go to next month</div>','\t<div id="datepicker-bn-fast-prev-label-CALENDARID" class="datepicker-bn-fast-prev-label offscreen">Go to previous year</div>','\t<div id="datepicker-bn-fast-next-label-CALENDARID" class="datepicker-bn-fast-next-label offscreen">Go to next year</div>','\t<div id="datepicker-bn-close-label-CALENDARID" class="datepicker-bn-close-label offscreen">Close the date picker</div>',"</div>"],s=function(e,r){var n=this;switch(this.$target=t(e),this.options=t.extend({},s.DEFAULTS,r),this.locales=Date.dp_locales,this.options.startView){case 1:case"months":this.options.startView=1;break;case 2:case"years":this.options.startView=2;break;default:this.options.startView=0}"string"==typeof this.options.inputFormat&&(this.options.inputFormat=[this.options.inputFormat]),null!=this.options.min?this.options.min=this.parseDate(this.options.min):this.$target.attr("min")&&(this.options.min=this.parseDate(this.$target.attr("min"))),null!=this.options.max?this.options.max=this.parseDate(this.options.max):this.$target.attr("max")&&(this.options.max=this.parseDate(this.$target.attr("max"))),this.id=this.$target.attr("id")||"datepicker-"+Math.floor(1e5*Math.random());var o=i.join("");o=o.replace(/CALENDARID/g,this.id+""),0==this.$target.parent(".input-group").length&&this.$target.wrap('<div class="input-group"></div>'),this.$label=this.$target.parents().find("label[for="+this.id+"]"),this.$group=this.$target.parent(".input-group"),this.$target.attr("aria-autocomplete","none"),this.$target.css("min-width","7em"),this.$target.addClass("form-control"),this.$target.attr("placeholder")||this.$target.attr("placeholder",this.options.inputFormat[0]);var h=a.join("");h=h.replace(/CALENDARID/g,this.id+""),this.$button=t(h),this.$button.addClass(this.options.theme),this.$calendar=t(o),this.$calendar.addClass(this.options.theme),this.$target.after(this.$button),0!=this.options.inline?(this.hideObject(this.$button),("string"==typeof this.options.inline?t("#"+this.options.inline):this.options.inline).append(this.$calendar),this.$calendar.css({position:"relative",left:"0px"}),this.initializeDate()):(this.$target.parent().after(this.$calendar),this.hide(!this.options.gainFocusOnConstruction)),"static"===this.$calendar.parent().css("position")&&this.$calendar.parent().css("position","relative"),this.$calendar.find(".datepicker-bn-open-label").html(this.options.buttonLabel),this.$target.attr("id")&&this.$calendar.attr("aria-controls",this.$target.attr("id")),this.$button.find("span").attr("title",this.options.buttonTitle),this.$calendar.css("left",this.$target.parent().position().left+"px"),this.$monthObj=this.$calendar.find(".datepicker-month"),this.$prev=this.$calendar.find(".datepicker-month-prev"),this.$next=this.$calendar.find(".datepicker-month-next"),this.$fastprev=this.$calendar.find(".datepicker-month-fast-prev"),this.$fastnext=this.$calendar.find(".datepicker-month-fast-next"),this.$grid=this.$calendar.find(".datepicker-grid"),"RTL"===this.locales.directionality&&this.$grid.addClass("rtl");this.$grid.find("th.datepicker-day abbr");this.drawCalendarHeader(),0==this.options.inline&&1==this.options.modal?(this.$close=this.$calendar.find(".datepicker-close"),this.$close.html(this.options.closeButtonTitle).attr("title",this.options.closeButtonLabel),this.$calendar.find(".datepicker-bn-close-label").html(this.options.closeButtonLabel)):(this.hideObject(this.$calendar.find(".datepicker-close-wrap")),this.hideObject(this.$calendar.find(".datepicker-bn-close-label"))),this.keys={tab:9,enter:13,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40},this.bindHandlers(),this.$button.click(function(t){return"true"===n.$calendar.attr("aria-hidden")?(n.initializeDate(),n.show()):n.hide(),n.selectGridCell(n.$grid.attr("aria-activedescendant")),t.stopPropagation(),!1}),this.$button.keydown(function(e){var a=e||event;if(a.keyCode==n.keys.enter||a.keyCode==n.keys.space)return t(this).trigger("click"),!1}),this.$calendar.on("blur",function(t){"false"===n.$calendar.attr("aria-hidden")&&n.hide()})};s.VERSION="2.1.1",s.DEFAULTS={firstDayOfWeek:Date.dp_locales.firstday_of_week,weekDayFormat:"short",startView:0,daysOfWeekDisabled:[],inputFormat:[Date.dp_locales.short_format],outputFormat:Date.dp_locales.short_format,titleFormat:Date.dp_locales.full_format,buttonTitle:Date.dp_locales.texts.buttonTitle,buttonLabel:Date.dp_locales.texts.buttonLabel,prevButtonLabel:Date.dp_locales.texts.prevButtonLabel,prevMonthButtonLabel:Date.dp_locales.texts.prevMonthButtonLabel,prevYearButtonLabel:Date.dp_locales.texts.prevYearButtonLabel,nextButtonLabel:Date.dp_locales.texts.nextButtonLabel,nextMonthButtonLabel:Date.dp_locales.texts.nextMonthButtonLabel,nextYearButtonLabel:Date.dp_locales.texts.nextYearButtonLabel,changeMonthButtonLabel:Date.dp_locales.texts.changeMonthButtonLabel,changeYearButtonLabel:Date.dp_locales.texts.changeYearButtonLabel,changeRangeButtonLabel:Date.dp_locales.texts.changeRangeButtonLabel,closeButtonTitle:Date.dp_locales.texts.closeButtonTitle,closeButtonLabel:Date.dp_locales.texts.closeButtonLabel,onUpdate:function(t){},theme:"default",modal:!1,inline:!1,gainFocusOnConstruction:!0,min:null,max:null},s.prototype.initializeDate=function(){var t=this.$target.val(),e=""===t?new Date:this.parseDate(t);this.setDate(e)},s.prototype.getDate=function(){var t=this.$target.val();return""===t?new Date:this.parseDate(t)},s.prototype.setDate=function(t){switch(this.dateObj=t,null==this.dateObj&&(this.$target.attr("aria-invalid",!0),this.$target.parents(".form-group").addClass("has-error"),this.dateObj=new Date,this.dateObj.setHours(0,0,0,0)),null!=this.options.min&&this.dateObj<this.options.min?(this.$target.attr("aria-invalid",!0),this.$target.parents(".form-group").addClass("has-error"),this.dateObj=this.options.min):null!=this.options.max&&this.dateObj>this.options.max&&(this.$target.attr("aria-invalid",!0),this.$target.parents(".form-group").addClass("has-error"),this.dateObj=this.options.max),this.$target.val(this.format(this.dateObj)),this.curYear=this.dateObj.getFullYear(),this.year=this.curYear,this.curMonth=this.dateObj.getMonth(),this.month=this.curMonth,this.date=this.dateObj.getDate(),this.options.startView){case 1:this.populateMonthsCalendar(),this.$grid.attr("aria-activedescendant",this.$grid.find(".curMonth").attr("id"));break;case 2:this.populateYearsCalendar(),this.$grid.attr("aria-activedescendant",this.$grid.find(".curYear").attr("id"));break;default:this.populateDaysCalendar(),this.$grid.attr("aria-activedescendant",this.$grid.find(".curDay").attr("id"))}},s.prototype.drawCalendarHeader=function(){for(var t=this.$grid.find("th.datepicker-day"),e=this.options.firstDayOfWeek,a=0;a<7;a++)t.eq(a).attr("aria-label",this.locales.day_names[e]),t.children("abbr").eq(a).attr("title",this.locales.day_names[e]).text("short"===this.options.weekDayFormat?this.locales.day_names_short[e]:this.locales.day_names_narrow[e]),e=(e+1)%7},s.prototype.populateDaysCalendar=function(){this.$calendar.find(".datepicker-bn-prev-label").html(this.options.prevButtonLabel),this.$calendar.find(".datepicker-bn-next-label").html(this.options.nextButtonLabel),this.$calendar.find(".datepicker-bn-fast-prev-label").html(this.options.prevMonthButtonLabel),this.$calendar.find(".datepicker-bn-fast-next-label").html(this.options.nextMonthButtonLabel),null!=this.options.min&&(this.year-1<this.options.min.getFullYear()||this.year-1==this.options.min.getFullYear()&&this.month<this.options.min.getMonth())?(this.$fastprev.attr("title",""),this.$fastprev.addClass("disabled"),this.$fastprev.removeClass("enabled")):(this.$fastprev.attr("title",this.options.prevMonthButtonLabel),this.$fastprev.addClass("enabled"),this.$fastprev.removeClass("disabled"));var e=this.previousMonth(this.year,this.month);null!=this.options.min&&(e.year<this.options.min.getFullYear()||e.year==this.options.min.getFullYear()&&e.month<this.options.min.getMonth())?(this.$prev.attr("title",""),this.$prev.addClass("disabled"),this.$prev.removeClass("enabled")):(this.$prev.attr("title",this.options.prevButtonLabel),this.$prev.addClass("enabled"),this.$prev.removeClass("disabled")),this.$monthObj.attr("title",this.options.changeMonthButtonLabel);var a=this.nextMonth(this.year,this.month);null!=this.options.max&&(a.year>this.options.max.getFullYear()||a.year==this.options.max.getFullYear()&&a.month>this.options.max.getMonth())?(this.$next.attr("title",""),this.$next.addClass("disabled"),this.$next.removeClass("enabled")):(this.$next.attr("title",this.options.nextButtonLabel),this.$next.addClass("enabled"),this.$next.removeClass("disabled")),null!=this.options.max&&(this.year+1>this.options.max.getFullYear()||this.year+1==this.options.max.getFullYear()&&this.month>this.options.max.getMonth())?(this.$fastnext.attr("title",""),this.$fastnext.addClass("disabled"),this.$fastnext.removeClass("enabled")):(this.$fastnext.attr("title",this.options.nextMonthButtonLabel),this.$fastnext.addClass("enabled"),this.$fastnext.removeClass("disabled")),this.showObject(this.$fastprev),this.showObject(this.$fastnext);var i=this.getDaysInMonth(this.year,this.month),s=this.getDaysInMonth(e.year,e.month),r=new Date(this.year,this.month,1).getDay(),n=(this.options.firstDayOfWeek+6)%7,o=1,h=1;this.$monthObj.html(this.locales.month_names[this.month]+" "+this.year),this.showObject(this.$grid.find("thead"));for(var l='\t<tr id="row0-'+this.id+'" role="row">\n',d=0,c=this.options.firstDayOfWeek;c!=r;)d++,c=(c+1)%7;for(;d>0;d--)l+='\t\t<td class="empty">'+(s-d+1)+"</td>\n";for(o=1;o<=i;o++){var p=new Date(this.year,this.month,o,0,0,0,0),u=this.formatDate(p,this.options.titleFormat),f=o==this.date&&this.month==this.curMonth&&this.year==this.curYear?" curDay":"";t.inArray(c,this.options.daysOfWeekDisabled)>-1?l+='\t\t<td id="cell'+o+"-"+this.id+'" class="day unselectable'+f+'"':null!=this.options.min&&p<this.options.min?l+='\t\t<td id="cell'+o+"-"+this.id+'" class="day unselectable'+f+'"':null!=this.options.max&&p>this.options.max?l+='\t\t<td id="cell'+o+"-"+this.id+'" class="day unselectable'+f+'"':l+='\t\t<td id="cell'+o+"-"+this.id+'" class="day selectable'+f+'"',l+=' data-value="'+o+'"',l+=' title="'+u+'"',l+=' aria-label="'+u+'"',l+=' headers="day'+c+"-header-"+this.id+'" role="gridcell" tabindex="-1" aria-selected="false">'+o,l+="</td>",c==n&&o<i&&(l+='\t</tr>\n\t<tr id="row'+h+"-"+this.id+'" role="row">\n',h++),o<i&&(c=(c+1)%7)}for(;c!=n;)l+='\t\t<td class="empty">'+ ++d+"</td>\n",c=(c+1)%7;l+="\t</tr>";var y=this.$grid.find("tbody");y.empty(),y.append(l),this.gridType=0},s.prototype.populateMonthsCalendar=function(){this.$calendar.find(".datepicker-bn-prev-label").html(this.options.prevMonthButtonLabel),this.$calendar.find(".datepicker-bn-next-label").html(this.options.nextMonthButtonLabel),this.hideObject(this.$fastprev),this.hideObject(this.$fastnext),null!=this.options.min&&this.year-1<this.options.min.getFullYear()?(this.$prev.attr("title",""),this.$prev.addClass("disabled"),this.$prev.removeClass("enabled")):(this.$prev.attr("title",this.options.prevMonthButtonLabel),this.$prev.addClass("enabled"),this.$prev.removeClass("disabled")),this.$monthObj.attr("title",this.options.changeYearButtonLabel),null!=this.options.max&&this.year+1>this.options.max.getFullYear()?(this.$next.attr("title",""),this.$next.addClass("disabled"),this.$next.removeClass("enabled")):(this.$next.attr("title",this.options.nextMonthButtonLabel),this.$next.addClass("enabled"),this.$next.removeClass("disabled"));var e=0,a=1,i=this.$grid.find("tbody");this.$monthObj.html(this.year),this.hideObject(this.$grid.find("thead")),i.empty(),t("#datepicker-err-msg-"+this.id).empty();var s='\t<tr id="row0-'+this.id+'" role="row">\n';for(e=0;e<12;e++)e==this.month&&this.year==this.curYear?s+='\t\t<td id="cell'+(e+1)+"-"+this.id+'" class="month curMonth selectable"':null!=this.options.min&&(this.year<this.options.min.getFullYear()||this.year==this.options.min.getFullYear()&&e<this.options.min.getMonth())?s+='\t\t<td id="cell'+(e+1)+"-"+this.id+'" class="month unselectable"':null!=this.options.max&&(this.year>this.options.max.getFullYear()||this.year==this.options.max.getFullYear()&&e>this.options.max.getMonth())?s+='\t\t<td id="cell'+(e+1)+"-"+this.id+'" class="month unselectable"':s+='\t\t<td id="cell'+(e+1)+"-"+this.id+'" class="month selectable"',s+=' data-value="'+e+'"',s+=' title="'+this.locales.month_names[e]+" "+this.year+'"',s+=' aria-label="'+this.locales.month_names[e]+" "+this.year+'"',s+=' role="gridcell" tabindex="-1" aria-selected="false">'+this.locales.month_names_abbreviated[e],s+="</td>",3!=e&&7!=e||(s+='\t</tr>\n\t<tr id="row'+a+"-"+this.id+'" role="row">\n',a++);s+="\t</tr>",i.append(s),this.gridType=1},s.prototype.populateYearsCalendar=function(){this.$calendar.find(".datepicker-bn-prev-label").html(this.options.prevYearButtonLabel),this.$calendar.find(".datepicker-bn-next-label").html(this.options.nextYearButtonLabel),this.hideObject(this.$fastprev),this.hideObject(this.$fastnext),null!=this.options.min&&this.year-20<this.options.min.getFullYear()?(this.$prev.attr("title",""),this.$prev.addClass("disabled"),this.$prev.removeClass("enabled")):(this.$prev.attr("title",this.options.prevYearButtonLabel),this.$prev.addClass("enabled"),this.$prev.removeClass("disabled")),this.$monthObj.attr("title",this.options.changeRangeButtonLabel),null!=this.options.max&&this.year+20>this.options.max.getFullYear()?(this.$next.attr("title",""),this.$next.addClass("disabled"),this.$next.removeClass("enabled")):(this.$next.attr("title",this.options.nextYearButtonLabel),this.$next.addClass("enabled"),this.$next.removeClass("disabled"));var e=10*Math.floor(this.year/10),a=e+19,i=1,s=this.$grid.find("tbody");this.$monthObj.html(e+"-"+a),this.hideObject(this.$grid.find("thead")),s.empty(),t("#datepicker-err-msg-"+this.id).empty();for(var r='\t<tr id="row0-'+this.id+'" role="row">\n',n=e;n<=a;n++){n==this.year?r+='\t\t<td id="cell'+(n-e+1)+"-"+this.id+'" class="year curYear selectable"':null!=this.options.min&&n<this.options.min.getFullYear()?r+='\t\t<td id="cell'+(n-e+1)+"-"+this.id+'" class="year unselectable"':null!=this.options.max&&n>this.options.max.getFullYear()?r+='\t\t<td id="cell'+(n-e+1)+"-"+this.id+'" class="year unselectable"':r+='\t\t<td id="cell'+(n-e+1)+"-"+this.id+'" class="year selectable"',r+=' data-value="'+n+'"',r+=' title="'+n+'"',r+=' role="gridcell" tabindex="-1" aria-selected="false">'+n,r+="</td>";var o=n-e;4!=o&&9!=o&&14!=o||(r+='\t</tr>\n\t<tr id="row'+i+"-"+this.id+'" role="row">\n',i++)}r+="\t</tr>",s.append(r),this.gridType=2},s.prototype.showDaysOfPrevMonth=function(t){var e=this.previousMonth(this.year,this.month);if(null!=this.options.min&&(e.year<this.options.min.getFullYear()||e.year==this.options.min.getFullYear()&&e.month<this.options.min.getMonth()))return!1;if(this.month=e.month,this.year=e.year,this.populateDaysCalendar(),null!=t){var a="cell"+(this.getDaysInMonth(this.year,this.month)-t)+"-"+this.id;this.$grid.attr("aria-activedescendant",a),this.selectGridCell(a)}return!0},s.prototype.showDaysOfMonth=function(t){if(null!=this.options.min&&(this.year<this.options.min.getFullYear()||this.year==this.options.min.getFullYear()&&t<this.options.min.getMonth()))return!1;if(null!=this.options.max&&(this.year>this.options.max.getFullYear()||this.year==this.options.max.getFullYear()&&t>this.options.max.getMonth()))return!1;this.month=t,this.date=Math.min(this.date,this.getDaysInMonth(this.year,this.month)),this.populateDaysCalendar();var e=this.$grid.find("tbody td[data-value='"+this.date+"']");return this.selectGridCell(e.attr("id")),!0},s.prototype.showMonthsOfPrevYear=function(t){if(null!=this.options.min&&this.year-1<this.options.min.getFullYear())return!1;if(this.year--,this.populateMonthsCalendar(),null!=t){var e="cell"+(12-t)+"-"+this.id;this.$grid.attr("aria-activedescendant",e),this.selectGridCell(e)}return!0},s.prototype.showMonthsOfYear=function(t){if(null!=this.options.min&&t<this.options.min.getFullYear())return!1;if(null!=this.options.max&&t>this.options.max.getFullYear())return!1;this.year=t,this.populateMonthsCalendar();var e=this.$grid.find("tbody td[data-value='"+this.month+"']");return this.$grid.attr("aria-activedescendant",e.attr("id")),this.selectGridCell(e.attr("id")),!0},s.prototype.showYearsOfPrevRange=function(t){if(null!=this.options.min&&this.year-20<this.options.min.getFullYear())return!1;if(this.year-=20,this.populateYearsCalendar(),null!=t){var e="cell"+(20-t)+"-"+this.id;this.$grid.attr("aria-activedescendant",e),this.selectGridCell(e)}return!0},s.prototype.showDaysOfNextMonth=function(t){var e=this.nextMonth(this.year,this.month);if(null!=this.options.max&&(e.year>this.options.max.getFullYear()||e.year==this.options.max.getFullYear()&&e.month>this.options.max.getMonth()))return!1;if(this.month=e.month,this.year=e.year,this.populateDaysCalendar(),null!=t){var a="cell"+t+"-"+this.id;this.$grid.attr("aria-activedescendant",a),this.selectGridCell(a)}return!0},s.prototype.showMonthsOfNextYear=function(t){if(null!=this.options.max&&this.year+1>this.options.max.getFullYear())return!1;if(this.year++,this.populateMonthsCalendar(),null!=t){var e="cell"+t+"-"+this.id;this.$grid.attr("aria-activedescendant",e),this.selectGridCell(e)}return!0},s.prototype.showYearsOfNextRange=function(t){if(null!=this.options.max&&this.year+20>this.options.max.getFullYear())return!1;if(this.year+=20,this.populateYearsCalendar(),null!=t){var e="cell"+t+"-"+this.id;this.$grid.attr("aria-activedescendant",e),this.selectGridCell(e)}return!0},s.prototype.showDaysOfPrevYear=function(){return(null==this.options.min||!(this.year-1<this.options.min.getFullYear()||this.year-1==this.options.min.getFullYear()&&this.month<this.options.min.getMonth()))&&(this.year--,this.populateDaysCalendar(),!0)},s.prototype.showDaysOfNextYear=function(){return(null==this.options.max||!(this.year+1>this.options.max.getFullYear()||this.year+1==this.options.max.getFullYear()&&this.month>this.options.max.getMonth()))&&(this.year++,this.populateDaysCalendar(),!0)},s.prototype.bindHandlers=function(){var t=this;this.$fastprev.click(function(e){return t.handleFastPrevClick(e)}),this.$prev.click(function(e){return t.handlePrevClick(e)}),this.$next.click(function(e){return t.handleNextClick(e)}),this.$fastnext.click(function(e){return t.handleFastNextClick(e)}),this.$monthObj.click(function(e){return t.handleMonthClick(e)}),this.$monthObj.keydown(function(e){return t.handleMonthKeyDown(e)}),this.$fastprev.keydown(function(e){return t.handleFastPrevKeyDown(e)}),this.$prev.keydown(function(e){return t.handlePrevKeyDown(e)}),this.$next.keydown(function(e){return t.handleNextKeyDown(e)}),this.$fastnext.keydown(function(e){return t.handleFastNextKeyDown(e)}),1==this.options.modal&&(this.$close.click(function(e){return t.handleCloseClick(e)}),this.$close.keydown(function(e){return t.handleCloseKeyDown(e)})),this.$grid.keydown(function(e){return t.handleGridKeyDown(e)}),this.$grid.keypress(function(e){return t.handleGridKeyPress(e)}),this.$grid.focus(function(e){return t.handleGridFocus(e)}),this.$grid.blur(function(e){return t.handleGridBlur(e)}),this.$grid.delegate("td","click",function(e){return t.handleGridClick(this,e)})},s.prototype.handleFastPrevClick=function(t){if(this.showDaysOfPrevYear()){var e=this.$grid.attr("aria-activedescendant");this.month!=this.curMonth||this.year!=this.curYear?(this.$grid.attr("aria-activedescendant","cell1-"+this.id),this.selectGridCell("cell1-"+this.id)):(this.$grid.attr("aria-activedescendant",e),this.selectGridCell(e))}return t.stopPropagation(),!1},s.prototype.handlePrevClick=function(t){var e=this.$grid.attr("aria-activedescendant");switch(this.gridType){case 0:(t.ctrlKey?this.showDaysOfPrevYear():this.showDaysOfPrevMonth())&&(this.month!=this.curMonth||this.year!=this.curYear?(this.$grid.attr("aria-activedescendant","cell1-"+this.id),this.selectGridCell("cell1-"+this.id)):(this.$grid.attr("aria-activedescendant",e),this.selectGridCell(e)));break;case 1:this.showMonthsOfPrevYear()&&(this.year!=this.curYear?(this.$grid.attr("aria-activedescendant","cell1-"+this.id),this.selectGridCell("cell1-"+this.id)):(this.$grid.attr("aria-activedescendant",e),this.selectGridCell(e)));break;case 2:this.showYearsOfPrevRange()&&(this.$grid.attr("aria-activedescendant","cell1-"+this.id),this.selectGridCell("cell1-"+this.id))}return t.stopPropagation(),!1},s.prototype.handleMonthClick=function(t){return this.changeGrid(t),t.stopPropagation(),!1},s.prototype.handleNextClick=function(t){var e=this.$grid.attr("aria-activedescendant");switch(this.gridType){case 0:(t.ctrlKey?this.showDaysOfNextYear():this.showDaysOfNextMonth())&&(this.month!=this.curMonth||this.year!=this.curYear?(this.$grid.attr("aria-activedescendant","cell1-"+this.id),this.selectGridCell("cell1-"+this.id)):(this.$grid.attr("aria-activedescendant",e),this.selectGridCell(e)));break;case 1:this.showMonthsOfNextYear()&&(this.year!=this.curYear?(this.$grid.attr("aria-activedescendant","cell1-"+this.id),this.selectGridCell("cell1-"+this.id)):(this.$grid.attr("aria-activedescendant",e),this.selectGridCell(e)));break;case 2:this.showYearsOfNextRange()&&(this.$grid.attr("aria-activedescendant","cell1-"+this.id),this.selectGridCell("cell1-"+this.id))}return t.stopPropagation(),!1},s.prototype.handleFastNextClick=function(t){if(this.showDaysOfNextYear()){var e=this.$grid.attr("aria-activedescendant");this.month!=this.curMonth||this.year!=this.curYear?(this.$grid.attr("aria-activedescendant","cell1-"+this.id),this.selectGridCell("cell1-"+this.id)):(this.$grid.attr("aria-activedescendant",e),this.selectGridCell(e))}return t.stopPropagation(),!1},s.prototype.handleCloseClick=function(t){return this.hide(),t.stopPropagation(),!1},s.prototype.handleFastPrevKeyDown=function(t){if(t.altKey)return!0;switch(t.keyCode){case this.keys.tab:return!(0!=this.options.modal&&!t.ctrlKey)||(t.shiftKey?this.$close.focus():this.$prev.focus(),t.stopPropagation(),!1);case this.keys.enter:case this.keys.space:return!(!t.shiftKey&&!t.ctrlKey)||(this.showDaysOfPrevYear(),t.stopPropagation(),!1);case this.keys.esc:return this.hide(),t.stopPropagation(),!1}return!0},s.prototype.handlePrevKeyDown=function(t){if(t.altKey)return!0;switch(t.keyCode){case this.keys.tab:return!(0!=this.options.modal&&!t.ctrlKey)||(t.shiftKey?0==this.gridType?this.$fastprev.focus():this.$close.focus():this.$monthObj.focus(),t.stopPropagation(),!1);case this.keys.enter:case this.keys.space:if(t.shiftKey)return!0;switch(this.gridType){case 0:t.ctrlKey?this.showDaysOfPrevYear():this.showDaysOfPrevMonth();break;case 1:this.showMonthsOfPrevYear();break;case 2:this.showYearsOfPrevRange()}return t.stopPropagation(),!1;case this.keys.esc:return this.hide(),t.stopPropagation(),!1}return!0},s.prototype.handleMonthKeyDown=function(t){if(t.altKey)return!0;switch(t.keyCode){case this.keys.tab:return!(0!=this.options.modal&&!t.ctrlKey)||(t.shiftKey?this.$prev.focus():this.$next.focus(),t.stopPropagation(),!1);case this.keys.enter:case this.keys.space:return this.changeGrid(t),t.stopPropagation(),!1;case this.keys.esc:return this.hide(),t.stopPropagation(),!1}return!0},s.prototype.handleNextKeyDown=function(t){if(t.altKey)return!0;switch(t.keyCode){case this.keys.tab:return!(0!=this.options.modal&&!t.ctrlKey)||(t.shiftKey?this.$monthObj.focus():0==this.gridType?this.$fastnext.focus():this.$grid.focus(),t.stopPropagation(),!1);case this.keys.enter:case this.keys.space:switch(this.gridType){case 0:t.ctrlKey?this.showDaysOfNextYear():this.showDaysOfNextMonth();break;case 1:this.showMonthsOfNextYear();break;case 2:this.showYearsOfNextRange()}return t.stopPropagation(),!1;case this.keys.esc:return this.hide(),t.stopPropagation(),!1}return!0},s.prototype.handleFastNextKeyDown=function(t){if(t.altKey)return!0;switch(t.keyCode){case this.keys.tab:return!(0!=this.options.modal&&!t.ctrlKey)||(t.shiftKey?this.$next.focus():this.$grid.focus(),t.stopPropagation(),!1);case this.keys.enter:case this.keys.space:return this.showDaysOfNextYear(),t.stopPropagation(),!1;case this.keys.esc:return this.hide(),t.stopPropagation(),!1}return!0},s.prototype.handleCloseKeyDown=function(t){if(t.altKey)return!0;switch(t.keyCode){case this.keys.tab:return!!t.ctrlKey||(t.shiftKey?this.$grid.focus():0==this.gridType?this.$fastprev.focus():this.$prev.focus(),t.stopPropagation(),!1);case this.keys.enter:case this.keys.esc:case this.keys.space:return!(!t.shiftKey&&!t.ctrlKey)||(this.hide(),t.stopPropagation(),!1)}return!0},s.prototype.handleGridKeyDown=function(a){var i=t("#"+this.$grid.attr("aria-activedescendant")),s=this.$grid.find("td.selectable"),r=this.$grid.find("tbody tr").eq(0).find("td").length;if(a.altKey)return!0;switch(a.keyCode){case this.keys.tab:return 1==this.options.modal?(a.shiftKey?0==this.gridType?this.$fastnext.focus():this.$next.focus():this.$close.focus(),a.stopPropagation(),!1):(this.hide(),this.handleTabOut(a),a.stopPropagation(),!1);case this.keys.enter:case this.keys.space:if(a.ctrlKey)return!0;switch(this.gridType){case 0:this.update(),this.hide();break;case 1:this.showDaysOfMonth(parseInt(i.attr("data-value"),10));break;case 2:this.showMonthsOfYear(parseInt(i.attr("data-value"),10))}return a.stopPropagation(),!1;case this.keys.esc:return this.hide(),a.stopPropagation(),!1;case this.keys.left:case this.keys.right:if(a.keyCode==this.keys.left&&"LTR"===this.locales.directionality||a.keyCode==this.keys.right&&"RTL"===this.locales.directionality){if(a.ctrlKey||a.shiftKey)return!0;n=null;if((o=s.index(i)-1)>=0)n=s.eq(o),this.unSelectGridCell(i.attr("id")),this.$grid.attr("aria-activedescendant",n.attr("id")),this.selectGridCell(n.attr("id"));else switch(this.gridType){case 0:this.showDaysOfPrevMonth(0);break;case 1:this.showMonthsOfPrevYear(0);break;case 2:this.showYearsOfPrevRange(0)}return a.stopPropagation(),!1}if(a.ctrlKey||a.shiftKey)return!0;h=null;if((o=s.index(i)+1)<s.length)h=s.eq(o),this.unSelectGridCell(i.attr("id")),this.$grid.attr("aria-activedescendant",h.attr("id")),this.selectGridCell(h.attr("id"));else switch(this.gridType){case 0:this.showDaysOfNextMonth(1);break;case 1:this.showMonthsOfNextYear(1);break;case 2:this.showYearsOfNextRange(1)}return a.stopPropagation(),!1;case this.keys.up:if(a.ctrlKey||a.shiftKey)return!0;var n=null;if((o=s.index(i)-r)>=0)n=s.eq(o),this.unSelectGridCell(i.attr("id")),this.$grid.attr("aria-activedescendant",n.attr("id")),this.selectGridCell(n.attr("id"));else switch(o=r-1-s.index(i),this.gridType){case 0:this.showDaysOfPrevMonth(o);break;case 1:this.showMonthsOfPrevYear(o);break;case 2:this.showYearsOfPrevRange(o)}return a.stopPropagation(),!1;case this.keys.down:if(a.ctrlKey||a.shiftKey)return!0;var o=s.index(i)+r,h=null;if(o<s.length)h=s.eq(o),this.unSelectGridCell(i.attr("id")),this.$grid.attr("aria-activedescendant",h.attr("id")),this.selectGridCell(h.attr("id"));else switch(o=r+1-(s.length-s.index(i)),this.gridType){case 0:this.showDaysOfNextMonth(o);break;case 1:this.showMonthsOfNextYear(o);break;case 2:this.showYearsOfNextRange(o)}return a.stopPropagation(),!1;case this.keys.pageup:l=this.$grid.attr("aria-activedescendant");if(a.shiftKey)return!0;a.preventDefault();d=!1;switch(this.gridType){case 0:a.ctrlKey?(a.stopImmediatePropagation(),d=this.showDaysOfPrevYear()):d=this.showDaysOfPrevMonth();break;case 1:d=this.showMonthsOfPrevYear();break;case 2:d=this.showYearsOfPrevRange()}if(d)if(t("#"+l).attr("id")==e){p=s.eq(s.length-1);this.$grid.attr("aria-activedescendant",p.attr("id")),this.selectGridCell(p.attr("id"))}else this.selectGridCell(l);return a.stopPropagation(),!1;case this.keys.pagedown:var l=this.$grid.attr("aria-activedescendant");if(a.shiftKey)return!0;a.preventDefault();var d=!1;switch(this.gridType){case 0:a.ctrlKey?(a.stopImmediatePropagation(),d=this.showDaysOfNextYear()):d=this.showDaysOfNextMonth();break;case 1:d=this.showMonthsOfNextYear();break;case 2:d=this.showYearsOfNextRange()}if(d)if(t("#"+l).attr("id")==e){p=s.eq(s.length-1);this.$grid.attr("aria-activedescendant",p.attr("id")),this.selectGridCell(p.attr("id"))}else this.selectGridCell(l);return a.stopPropagation(),!1;case this.keys.home:if(a.ctrlKey||a.shiftKey)return!0;var c=s.eq(0);return this.unSelectGridCell(i.attr("id")),this.$grid.attr("aria-activedescendant",c.attr("id")),this.selectGridCell(c.attr("id")),a.stopPropagation(),!1;case this.keys.end:if(a.ctrlKey||a.shiftKey)return!0;var p=s.eq(s.length-1);return this.unSelectGridCell(i.attr("id")),this.$grid.attr("aria-activedescendant",p.attr("id")),this.selectGridCell(p.attr("id")),a.stopPropagation(),!1}return!0},s.prototype.handleGridKeyPress=function(t){if(t.altKey)return!0;switch(t.keyCode){case this.keys.tab:case this.keys.enter:case this.keys.space:case this.keys.esc:case this.keys.left:case this.keys.right:case this.keys.up:case this.keys.down:case this.keys.pageup:case this.keys.pagedown:case this.keys.home:case this.keys.end:return t.stopPropagation(),!1}return!0},s.prototype.handleGridClick=function(e,a){var i=t(e);if(i.is(".empty")||i.is(".unselectable"))return!0;switch(this.$grid.find(".focus").removeClass("focus").attr("aria-selected","false").attr("tabindex",-1),this.gridType){case 0:this.$grid.attr("aria-activedescendant",i.attr("id")),this.selectGridCell(i.attr("id")),this.update(),this.hide();break;case 1:this.showDaysOfMonth(parseInt(i.attr("data-value"),10));break;case 2:this.showMonthsOfYear(parseInt(i.attr("data-value"),10))}return a.stopPropagation(),!1},s.prototype.handleGridFocus=function(a){var i=this.$grid.attr("aria-activedescendant");if(t("#"+i).attr("id")==e){var s=this.$grid.find("td.selectable"),r=s.eq(s.length-1);this.$grid.attr("aria-activedescendant",r.attr("id")),this.selectGridCell(r.attr("id"))}else this.selectGridCell(i);return!0},s.prototype.handleGridBlur=function(t){return this.unSelectGridCell(this.$grid.attr("aria-activedescendant")),!0},s.prototype.handleTabOut=function(e){var a=t("body").find("input:visible,textarea:visible,select:visible"),i=a.index(this.$target);return i>-1&&i<a.length&&(e.shiftKey?i>0&&i--:i+1<a.length&&i++,a.eq(i).focus()),!0},s.prototype.changeGrid=function(t){switch(this.gridType){case 0:if(this.populateMonthsCalendar(),this.year!=this.curYear){e=this.$grid.find("td.selectable");this.$grid.attr("aria-activedescendant",e.eq(0).attr("id"))}else this.$grid.attr("aria-activedescendant",this.$grid.find(".curMonth").attr("id"));this.selectGridCell(this.$grid.attr("aria-activedescendant"));break;case 2:t.shiftKey?this.year-=20:this.year+=20;case 1:if(this.populateYearsCalendar(),this.year!=this.curYear){var e=this.$grid.find("td.selectable");this.$grid.attr("aria-activedescendant",e.eq(0).attr("id"))}else this.$grid.attr("aria-activedescendant",this.$grid.find(".curYear").attr("id"));this.selectGridCell(this.$grid.attr("aria-activedescendant"))}return!0},s.prototype.selectGridCell=function(e){t("#"+e).addClass("focus").attr("aria-selected","true").attr("tabindex",0).focus()},s.prototype.unSelectGridCell=function(e){t("#"+e).removeClass("focus").attr("aria-selected","false").attr("tabindex",-1)},s.prototype.update=function(){var e=t("#"+this.$grid.attr("aria-activedescendant")),a=new Date(this.year,this.month,parseInt(e.attr("data-value"),10)),i=this.formatDate(a,this.options.outputFormat);this.$target.val(i),this.$target.removeAttr("aria-invalid"),this.$target.parents(".form-group").removeClass("has-error"),this.$target.trigger("change"),this.options.onUpdate&&this.options.onUpdate(i)},s.prototype.hideObject=function(t){t.attr("aria-hidden",!0),t.hide()},s.prototype.showObject=function(t){t.attr("aria-hidden",!1),t.show()},s.prototype.show=function(){var e=this;if(t(".datepicker-calendar").trigger("ab.datepicker.opening",[e.id]),1==this.options.modal){t(document).bind("click mousedown mouseup",function(t){return e.$grid.focus(),t.stopPropagation,!1}),this.greyOut(!0);var a=parseInt(t("#datepicker-overlay").css("z-index"),10)||40;this.$calendar.css("z-index",a+1)}else t(document).bind("click",t.proxy(this.handleDocumentClick,this)),this.$calendar.bind("ab.datepicker.opening",function(t,a){a!=e.id?e.hide():e.$grid.focus()});this.$calendar.bind("ab.datepicker.opened",function(t,a){a==e.id&&e.$grid.focus()});var i=Math.max(0,Math.floor(this.$group.offset().top-this.$label.offset().top)),s=Math.max(0,Math.floor(this.$group.offset().left-this.$label.offset().left)),r=parseInt(this.$calendar.parent().css("padding-left"),10),n=this.$calendar.outerHeight(),o=this.$group.offset().top,h=(this.$group.offset().left,this.$group.outerHeight(!0)),l=Math.floor(o-t(window).scrollTop()),d=Math.floor(t(window).height()-(o+h-t(window).scrollTop()));d<n&&d<l?(this.$calendar.addClass("above"),this.$calendar.css({top:i-n+"px",left:s+r+"px"})):(this.$calendar.addClass("below"),this.$calendar.css({top:h+i+"px",left:s+r+"px"})),this.$calendar.attr("aria-hidden","false"),this.$calendar.fadeIn(),t(".datepicker-calendar").trigger("ab.datepicker.opened",[e.id])},s.prototype.refresh=function(){switch(this.drawCalendarHeader(),this.gridType){case 0:this.populateDaysCalendar();break;case 1:this.populateMonthsCalendar();break;case 2:this.populateYearsCalendar()}},s.prototype.handleDocumentClick=function(e){return 0==t(e.target).parents("#datepicker-calendar-"+this.id).length?(this.hide(),!0):(this.$grid.focus(),e.stopPropagation,!1)},s.prototype.hide=function(e){if(0==this.options.inline){var a=this;1==this.options.modal?(t(document).unbind("click mousedown mouseup"),this.greyOut(!1)):(t(document).unbind("click",a.handleDocumentClick),this.$calendar.unbind("ab.datepicker.opening")),this.$calendar.removeClass("above below"),this.$calendar.attr("aria-hidden","true"),this.$calendar.fadeOut(),t(".datepicker-calendar").trigger("ab.datepicker.closed",[a.id]),e||this.$target.focus()}},s.prototype.greyOut=function(e){var a=t("#datepicker-overlay");0==a.length&&e&&(t("body").append('<div id="datepicker-overlay" class="datepicker-overlay"></div>'),a=t("#datepicker-overlay")),e?a.fadeIn(500):a.fadeOut(500)},s.prototype.absolutePosition=function(t){var e=0,a=0;if(t.getBoundingClientRect){var i=t.getBoundingClientRect(),s=document.body,r=document.documentElement,n=window.pageYOffset||r.scrollTop||s.scrollTop,o=window.pageXOffset||r.scrollLeft||s.scrollLeft,h=r.clientTop||s.clientTop||0,l=r.clientLeft||s.clientLeft||0;e=Math.round(i.top+n-h),a=Math.round(i.left+o-l)}else for(;t;)e+=parseInt(t.offsetTop,10),a+=parseInt(t.offsetLeft,10),t=t.offsetParent;return{top:e,left:a}},s.prototype.getDaysInMonth=function(t,e){return 32-new Date(t,e,32).getDate()},s.prototype.previousMonth=function(t,e){return 0==e?(e=11,t--):e--,{year:t,month:e}},s.prototype.nextMonth=function(t,e){return 11==e?(e=0,t++):e++,{year:t,month:e}},s.prototype.formatDate=function(t,e){var a=function(t){return(t<0||t>9?"":"0")+t},i=function(t){var e=new Date(t.getTime());return e.setHours(0),t-e},s=t.getFullYear()+"",r=t.getMonth()+1,n=t.getDate(),o=function(t){var e=new Date(t.getFullYear(),0,0);return Math.floor((t-e)/864e5)}(t),h=t.getDay(),l=t.getHours(),d=t.getMinutes(),c=t.getSeconds(),p=function(t){var e=new Date(t.getFullYear(),0,1);return Math.ceil(((t-e)/864e5+e.getDay()+1)/7)}(t),u=function(t){return Math.ceil((t.getDate()-1-t.getDay())/7)}(t),f=Math.floor(t.getDate()/7)+1,y=Math.ceil((t.getMonth()+1)/3),b=t.getFullYear()<1?0:1,g={y:""+s,yyyy:s,yy:s.substring(2,4),L:r,LL:a(r),LLL:this.locales.month_names_abbreviated[r-1],LLLL:this.locales.month_names[r-1],LLLLL:this.locales.month_names_narrow[r-1],M:r,MM:a(r),MMM:this.locales.month_names_abbreviated[r-1],MMMM:this.locales.month_names[r-1],MMMMM:this.locales.month_names_narrow[r-1],d:n,dd:a(n),D:o,DD:o,DDD:o,A:Math.round(i(t)*Math.pow(10,-2)),AA:Math.round(i(t)*Math.pow(10,-1)),AAA:Math.round(i(t)*Math.pow(10,0)),AAAA:Math.round(i(t)*Math.pow(10,1)),AAAAA:Math.round(i(t)*Math.pow(10,2)),AAAAAA:Math.round(i(t)*Math.pow(10,3)),E:this.locales.day_names_abbreviated[h],EE:this.locales.day_names_abbreviated[h],EEE:this.locales.day_names_abbreviated[h],EEEE:this.locales.day_names[h],EEEEE:this.locales.day_names_narrow[h],EEEEEE:this.locales.day_names_short[h],e:h,ee:h,eee:this.locales.day_names_abbreviated[h],eeee:this.locales.day_names[h],eeeee:this.locales.day_names_narrow[h],eeeeee:this.locales.day_names_short[h],c:h,cc:h,ccc:this.locales.day_names_abbreviated[h],cccc:this.locales.day_names[h],ccccc:this.locales.day_names_narrow[h],cccccc:this.locales.day_names_short[h],F:f,G:this.locales.era_names_abbreviated[b],GG:this.locales.era_names_abbreviated[b],GGG:this.locales.era_names_abbreviated[b],GGGG:this.locales.era_names[b],GGGGG:this.locales.era_names_narrow[b],Q:y,QQ:a(y),QQQ:this.locales.quarter_names_abbreviated[y-1],QQQQ:this.locales.quarter_names[y-1],QQQQQ:this.locales.quarter_names_narrow[y-1],q:y,qq:a(y),qqq:this.locales.quarter_names_abbreviated[y-1],qqqq:this.locales.quarter_names[y-1],qqqqq:this.locales.quarter_names_narrow[y-1],H:l,HH:a(l),h:0==l?12:l>12?l-12:l,hh:a(0==l?12:l>12?l-12:l),K:l>11?l-12:l,k:l+1,KK:a(l>11?l-12:l),kk:a(l+1),a:l>11?this.locales.day_periods.pm:this.locales.day_periods.am,m:d,mm:a(d),s:c,ss:a(c),w:p,ww:a(p),W:u};return e.replace(/('[^']+'|y{1,4}|L{1,5}|M{1,5}|c{1,6}|d{1,2}|D{1,3}|E{1,6}|e{1,6}|F{1,1}|G{1,5}|Q{1,5}|q{1,5}|H{1,2}|h{1,2}|K{1,2}|k{1,2}|m{1,2}|s{1,2}|w{1,2}|W{1,1}|A{1,6})/g,function(t){return"'"===t.charAt(0)?t.substr(1,t.length-2):g[t]||t})},s.prototype.createDateFromFormat=function(e,a){var i=function(t,e,a,i){for(var s=i;s>=a;s--){var r=t.substring(e,e+s);if(r.length<a)return null;if(/^\d+$/.test(r))return r}return null},s=function(t,e){for(var i=0;i<t.length;i++){var s=t[i];if(a.substring(e,e+s.length).toLowerCase()==s.toLowerCase())return s.length}return 0},r=0,n=new Date,o=n.getYear(),h=n.getMonth()+1,l=1,d=0,c=0,p=0,u="";if(t.each(e.match(/(.).*?\1*/g),function(t,e){switch(e){case"yyyy":null!=(o=i(a,r,4,4))&&(r+=o.length);break;case"yy":null!=(o=i(a,r,2,2))&&(r+=o.length);break;case"y":null!=(o=i(a,r,2,4))&&(r+=o.length);break;case"MMM":case"LLL":h=0;for(n=0;n<this.locales.month_names_abbreviated.length;n++){f=this.locales.month_names_abbreviated[n];if(a.substring(r,r+f.length).toLowerCase()==f.toLowerCase()){h=n+1,r+=f.length;break}}break;case"MMMM":case"LLLL":h=0;for(var n=0;n<this.locales.month_names.length;n++){var f=this.locales.month_names[n];if(a.substring(r,r+f.length).toLowerCase()==f.toLowerCase()){h=n+1,r+=f.length;break}}break;case"EEE":case"EE":case"E":case"eee":r+=s(this.locales.day_names_abbreviated,r);break;case"EEEE":case"eeee":case"cccc":r+=s(this.locales.day_names,r);break;case"EEEEEE":case"eeeeee":case"cccccc":r+=s(this.locales.day_names_short,r);break;case"MM":case"M":case"LL":case"L":if(null==(h=i(a,r,e.length,2))||h<1||h>12)return null;r+=h.length;break;case"dd":case"d":if(null==(l=i(a,r,e.length,2))||l<1||l>31)return null;r+=l.length;break;case"hh":case"h":if(null==(d=i(a,r,e.length,2))||d<1||d>12)return null;r+=d.length;break;case"HH":case"H":if(null==(d=i(a,r,e.length,2))||d<0||d>23)return null;r+=d.length;break;case"KK":case"K":if(null==(d=i(a,r,e.length,2))||d<0||d>11)return null;r+=d.length;break;case"kk":case"k":if(null==(d=i(a,r,e.length,2))||d<1||d>24)return null;r+=d.length,d--;break;case"mm":case"m":if(null==(c=i(a,r,e.length,2))||c<0||c>59)return null;r+=c.length;break;case"ss":case"s":if(null==(p=i(a,r,e.length,2))||p<0||p>59)return null;r+=p.length;break;case"a":var y=this.locales.day_periods.am.length,b=this.locales.day_periods.pm.length;if(a.substring(r,r+y)==this.locales.day_periods.am)u="AM",r+=y;else{if(a.substring(r,r+b)!=this.locales.day_periods.pm)return null;u="PM",r+=b}break;default:if(a.substring(r,r+e.length)!=e)return null;r+=e.length}}),r!=a.length)return null;if(null==o)return null;if(2==o.length&&(o=o>50?o-0+1900:o-0+2e3),h<1||h>12)return null;if(2==h)if(o%4==0&&o%100!=0||o%400==0){if(l>29)return null}else if(l>28)return null;return(4==h||6==h||9==h||11==h)&&l>30?null:(d<12&&"PM"==u?d=d-0+12:d>11&&"AM"==u&&(d-=12),new Date(o,h-1,l,d,c,p))},s.prototype.parseDate=function(e){var a=null,i=this;return t.each(this.options.inputFormat,function(t,s){if(null!=(a=i.createDateFromFormat(s,e)))return!1}),null==a&&(a=i.createDateFromFormat(this.options.outputFormat,e)),a},s.prototype.min=function(t){return null!=t&&(this.options.min=t instanceof Date?t:this.parseDate(t),null!=this.options.min&&this.dateObj<this.options.min&&(this.$target.attr("aria-invalid",!0),this.$target.parents(".form-group").addClass("has-error"),this.dateObj=this.options.min),0!=this.options.inline&&this.refresh()),this.options.min},s.prototype.max=function(t){return null!=t&&(this.options.max=t instanceof Date?t:this.parseDate(t),null!=this.options.max&&this.dateObj>this.options.max&&(this.$target.attr("aria-invalid",!0),this.$target.parents(".form-group").addClass("has-error"),this.dateObj=this.options.max),0!=this.options.inline&&this.refresh()),this.options.max},s.prototype.theme=function(t){return null!=t&&(this.$button.removeClass(this.options.theme),this.$calendar.removeClass(this.options.theme),this.options.theme=t,this.$button.addClass(this.options.theme),this.$calendar.addClass(this.options.theme)),this.options.theme},s.prototype.firstDayOfWeek=function(t){return null!=t&&(this.options.firstDayOfWeek=parseInt(t,10),0==this.options.inline?this.drawCalendarHeader():this.refresh()),this.options.firstDayOfWeek},s.prototype.daysOfWeekDisabled=function(e){if(null!=e){this.options.daysOfWeekDisabled=[],t.isArray(e)||(e=[e]);var a=this;t.each(e,function(t,e){"number"==typeof e?a.options.daysOfWeekDisabled.push(e):"string"==typeof e&&a.options.daysOfWeekDisabled.push(parseInt(e,10))})}return this.options.daysOfWeekDisabled},s.prototype.weekDayFormat=function(t){return null!=t&&(this.options.weekDayFormat=t,this.drawCalendarHeader()),this.options.weekDayFormat},s.prototype.inputFormat=function(e){return null!=e&&(t.isArray(e)||(e=[e]),this.$target.attr("placeholder")==this.options.inputFormat[0]&&this.$target.attr("placeholder",e[0]),this.options.inputFormat=e),this.options.inputFormat},s.prototype.outputFormat=function(t){return null!=t&&(this.options.outputFormat=t),this.options.outputFormat},s.prototype.modal=function(t){if(null!=t)if(this.options.modal=t,1==this.options.modal){0==this.options.inline&&(this.showObject(this.$calendar.find(".datepicker-close-wrap")),this.showObject(this.$calendar.find(".datepicker-bn-close-label"))),this.$close=this.$calendar.find(".datepicker-close"),this.$close.html(this.options.closeButtonTitle).attr("title",this.options.closeButtonLabel),this.$calendar.find(".datepicker-bn-close-label").html(this.options.closeButtonLabel);var e=this;this.$close.click(function(t){return e.handleCloseClick(t)}),this.$close.keydown(function(t){return e.handleCloseKeyDown(t)})}else this.hideObject(this.$calendar.find(".datepicker-close-wrap")),this.hideObject(this.$calendar.find(".datepicker-bn-close-label"));return this.options.modal},s.prototype.inline=function(e){return null!=e&&(0!=e?(this.hideObject(this.$button),this.hideObject(this.$calendar.find(".datepicker-close-wrap")),this.hideObject(this.$calendar.find(".datepicker-bn-close-label")),("string"==typeof e?t("#"+e):e).append(this.$calendar),this.$calendar.css({position:"relative",left:"0px",top:"0px"}),this.options.inline=e,this.initializeDate(),this.showObject(this.$calendar)):(this.$target.parent().after(this.$calendar),this.showObject(this.$button),1==this.options.modal&&(this.showObject(this.$calendar.find(".datepicker-close-wrap")),this.showObject(this.$calendar.find(".datepicker-bn-close-label"))),"static"===this.$calendar.parent().css("position")&&this.$calendar.parent().css("position","relative"),this.$calendar.css({position:"absolute"}),this.options.inline=e,this.hide())),this.options.inline},s.prototype.format=function(t){return this.formatDate(t,this.options.outputFormat)},s.prototype.setLocales=function(t){this.locales=t,this.options.inputFormat=[this.locales.short_format],this.options.outputFormat=this.locales.short_format,this.options.titleFormat=this.locales.full_format,this.options.firstDayOfWeek=this.locales.firstday_of_week,this.options.buttonTitle=this.locales.texts.buttonTitle,this.$button.find("span").attr("title",this.options.buttonTitle),this.options.buttonLabel=this.locales.texts.buttonLabel,this.options.prevButtonLabel=this.locales.texts.prevButtonLabel,this.options.prevMonthButtonLabel=this.locales.texts.prevMonthButtonLabel,this.options.prevYearButtonLabel=this.locales.texts.prevYearButtonLabel,this.options.nextButtonLabel=this.locales.texts.nextButtonLabel,this.options.nextMonthButtonLabel=this.locales.texts.nextMonthButtonLabel,this.options.nextYearButtonLabel=this.locales.texts.nextYearButtonLabel,this.options.changeMonthButtonLabel=this.locales.texts.changeMonthButtonLabel,this.options.changeYearButtonLabel=this.locales.texts.changeYearButtonLabel,this.options.changeRangeButtonLabel=this.locales.texts.changeRangeButtonLabel,this.options.closeButtonTitle=this.locales.texts.closeButtonTitle,this.options.closeButtonLabel=this.locales.texts.closeButtonLabel,this.options.calendarHelp=this.locales.texts.calendarHelp,this.drawCalendarHeader(),"RTL"===this.locales.directionality?this.$grid.addClass("rtl"):this.$grid.removeClass("rtl")};var r=t.fn.datepicker;t.fn.datepicker=function(e,a){if("string"!=typeof e||1!=t(this).length)return this.each(function(){var i=t(this),r=i.data("ab.datepicker"),n=t.extend({},s.DEFAULTS,i.data(),"object"==typeof e&&e);r||i.data("ab.datepicker",r=new s(this,n)),"string"==typeof e&&r[e](a)});var i=t(this).eq(0).data("ab.datepicker");return i?i[e](a):void 0},t.fn.datepicker.Constructor=s,t.fn.datepicker.noConflict=function(){return t.fn.datepicker=r,this}});